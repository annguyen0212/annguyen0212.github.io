<!DOCTYPE html>
<html>
  <head>
    <title>Experiment</title>
    <script src="jspsych.js"></script>
    <script src="plugins/jspsych-html-button-response.js"></script>
    <script src="plugins/jspsych-image-button-response.js"></script>
    <script src="plugins/jspsych-audio-button-response.js"></script>
    <script src="plugins/jspsych-survey-multi-choice.js"></script>


    <link href="css/jspsych.css" rel="stylesheet" type="text/css"></link>
  </head>
  <body>  
  </body>
  <script>
   var timeline = [];
   var page_1_options = ["old Victorian-era bright green house", "bright old Victorian-era green house", "Victorian-era old bright green house", "old bright green Victorian-era house"];
  var page_2_options =  ["go to bed earlier", "go to bed later", "wake up earlier", "wake up later"];
   var page_3_options =  ["through", "on", "in", "inside", "outside", "near"];   
   var page_4_options =  ["start the bath", "fill the bath", "get the bath", "draw the bath", "make the bath", "load the bath"];   
  
      var multi_choice_block = {
  type: 'survey-multi-choice',
   preamble: " <audio src='sound/q1.wav'> ",
  questions: [
    {prompt: "Miranda has been saving money to buy a house. She wants to purchase a(n) ... ", name: 'adj', options: page_1_options, required:true},       
    {prompt: "Miranda has been sleeping late. This affects both her work and her health. To address this, she should ", name: 'sleeping', options: page_2_options, required: true},
    {prompt: "The worker notices that there is a crack ___ the pavement ", name: 'preposition', options: page_3_options, required: true},
    {prompt: "It is so hot outside! I'm going to ___ ", name: 'phrase', options: page_4_options, required: true},
    {prompt: " <audio controls> <src='sound/q1.wav' type='audio/wav'> ", name: 'audio', options: page_4_options, required: true},
],
 on_finish: function(data){
     var number = 0
 var1 = (data.responses.split(",")[0]);
  var2 =    data.responses.split(",")[1];
   var3 =  data.responses.split(",")[2]
  var4 =  data.responses.split(",")[3]
if (var1.match(/[a-zA-Z0-9]/g).join('') == 'Q0oldVictorianerabrightgreenhouse') { number ++; }
 if (var2.match(/[a-zA-Z0-9]/g).join('') == 'Q1wakeupearlier') { number ++;}
      if (var3.match(/[a-zA-Z0-9]/g).join('') == 'Q2on') { number ++;}
      if (var4.match(/[a-zA-Z0-9]/g).join('') == 'Q3drawthebath') { number ++;}


             data.correct = number;
 }
 };
      
   
   
  
      timeline.push(multi_choice_block);
      jsPsych.init({
      timeline: timeline,
     fullscreen: true,
      on_finish: function() {
        var trials = jsPsych.data.get().last(1);
        jsPsych.data.displayData();
         var accuracy = ((jsPsych.data.get().select('correct').values).toString());
       setTimeout(function() {if (accuracy==4){return window.location.replace('probing.html');}
                              else {return window.location.replace('scn.html');}
           }, 2000);
       }
   
    });
  </script>
</html>
